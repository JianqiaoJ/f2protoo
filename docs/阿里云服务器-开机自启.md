# 阿里云服务器开机自启

阿里云 ECS 重启后，需要以下两个服务自动起来：

| 服务 | 作用 | systemd 单元 |
|------|------|-------------|
| **Nginx** | 提供前端页面 + `/api/` 反代到后端 | `nginx.service` |
| **后端** | Node 接口（推荐、偏好、登录等） | `music-player-backend.service` |

## 一、确认是否已开机自启

SSH 登录服务器后执行：

```bash
# 查看是否已 enable（enabled = 开机会自动启动）
systemctl is-enabled nginx
systemctl is-enabled music-player-backend
```

两者都应输出 `enabled`。

## 二、若未启用，执行一次即可

```bash
sudo systemctl enable nginx
sudo systemctl enable music-player-backend
```

之后每次重启机器，这两个服务都会自动启动。

## 三、常用命令

```bash
# 查看状态
sudo systemctl status nginx
sudo systemctl status music-player-backend

# 手动重启（无需重启服务器）
sudo systemctl restart nginx
sudo systemctl restart music-player-backend

# 查看后端日志
tail -f /opt/music-player-backend/backend.log
```

## 四、部署脚本中的配置

`deploy.sh` 在部署时已执行：

- `systemctl enable music-player-backend`：后端开机自启
- Nginx 在安装时（`apt install nginx`）通常已默认 enable

若你曾手动关闭过开机自启，只需重新跑一次上面的「二、若未启用」两条命令即可。
